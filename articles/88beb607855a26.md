---
title: "Cloudflare D1ã§Drizzle ORMã‚’ä½¿ã†"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Cloudflare, Drizzle]
published: false
---
## ã¯ã˜ã‚ã«

Cloudflare D1ã§Drizzle ORMã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚ä»¥ä¸‹ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ä½œæ¥­ã‚’é€²ã‚ã¾ã™ã€‚

- [Get Started with Drizzle and D1](https://orm.drizzle.team/docs/get-started/d1-new)

ãªãŠè¨˜äº‹ã‚’æŠ•ç¨¿ã—ãŸæ™‚ç‚¹ã§Drizzleå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ä¸€éƒ¨ä¸å‚™ãŒã‚ã‚Šã¾ã—ãŸã€‚å†…å®¹ã¯é©å®œè£œè¶³ã—ã¾ã™ã€‚

### ç’°å¢ƒ

è¨˜äº‹ã®æŠ•ç¨¿ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®ç’°å¢ƒã§å‹•ä½œç¢ºèªã—ã¾ã—ãŸã€‚

- node: 23.5.0
- drizzle-orm: 0.38.3
- drizzle-kit: 0.30.1

å‹•ä½œç¢ºèªã¯macOSã§è¡Œã„ã¾ã—ãŸãŒã€Node.jsãŒå‹•ä½œã™ã‚‹ç’°å¢ƒã§ã‚ã‚Œã°Windowsã‚„Linuxãªã©OSã«ä¾å­˜ã›ãšå‹•ä½œã™ã‚‹ã¯ãšã§ã™ã€‚

## Step 1: Workersãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹

ã¾ãšã¯Workersãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```console
$ npm create cloudflare@latest
```

å„é …ç›®ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å›ç­”ã—ã¾ã—ãŸã€‚

```text
â”œ In which directory do you want to create your application?
â”‚ dir ./drizzle-test
â”‚
â”œ What would you like to start with?
â”‚ category Hello World example
â”‚
â”œ Which template would you like to use?
â”‚ type Hello World Worker
â”‚
â”œ Which language do you want to use?
â”‚ lang TypeScript
```

ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ã®ã¡ã§è¡Œã†ãŸã‚ã€ŒDo you want to deploy your application?ã€ã¯ã²ã¨ã¾ãšNoã§é€²ã‚ã¦ãã ã•ã„ã€‚

## Step 2: D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹

ç¶šã„ã¦D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```console
cd ./drizzle-test
$ npx wrangler d1 create my-database
```

æ¬¡ã®æ‰‹é †ã§åˆ©ç”¨ã™ã‚‹ãŸã‚ã€çµæœã‚’ãƒ¡ãƒ¢ã—ã¦ãã ã•ã„ã€‚

å®Ÿè¡Œçµæœã®ä¾‹

```console
 â›…ï¸ wrangler 3.100.0
--------------------

âœ… Successfully created DB 'my-database' in region WNAM
Created your new D1 database.

[[d1_databases]]
binding = "DB"
database_name = "my-database"
database_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
```

## Step 3: wrangler.tomlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹

wrangler.tomlãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€æœ«å°¾ã«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®é …ç›®ã‚’è¿½åŠ ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

```toml
#:schema node_modules/wrangler/config-schema.json
name = "drizzle-test"
main = "src/index.ts"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

# ï¼ˆçœç•¥ï¼‰

[[d1_databases]]
binding = "DB"
database_name = "my-database"
database_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
```

â€»`database_id = "xxx..."`ã¯Step 3ã§ãƒ¡ãƒ¢ã—ãŸå†…å®¹ã§ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

## Step 4: ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®å‹å®šç¾©ã‚’ç”Ÿæˆã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```console
$ npx wrangler types
```

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`worker-configuration.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‹å®šç¾©ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚Œã°æˆåŠŸã§ã™ã€‚

```console
$ cat ./worker-configuration.d.ts
// Generated by Wrangler by running `wrangler types`

interface Env {
	DB: D1Database;
}
```

## Step 5: Drizzleã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```console
$ npm i drizzle-orm dotenv
$ npm i -D drizzle-kit tsx
```

## Step 6: ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å®šç¾©ã™ã‚‹

`src/db`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®å†…å®¹ã§`src/db/schema.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

```ts
import { int, sqliteTable, text } from 'drizzle-orm/sqlite-core';

export const usersTable = sqliteTable('users', {
	id: int().primaryKey({ autoIncrement: true }),
	name: text().notNull(),
	age: int().notNull(),
	email: text().notNull().unique(),
});
```

### ï¼ˆè£œè¶³ï¼‰åå‰ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã«ã¤ã„ã¦

Drizzleã¯ãƒ†ãƒ¼ãƒ–ãƒ«åã‚„ã‚«ãƒ©ãƒ åã‚’TypeScriptã®ã‚³ãƒ¼ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹è¨­å®šãŒå¯èƒ½ã§ã™ã€‚ãŸã ã—ã€Drizzleã®Get startedã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹å®Ÿè£…ã§ã¯`users`ã§ã¯ãªã`users_table`ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

```text
// ä¿®æ­£å‰
export const usersTable = sqliteTable("users_table", {

// ä¿®æ­£å¾Œ
export const usersTable = sqliteTable("users", {
```

## Step 7: drizzle.config.tsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`drizzle.config.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã®å†…å®¹ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

```ts
import 'dotenv/config';
import { defineConfig } from 'drizzle-kit';

export default defineConfig({
	out: './drizzle',
	schema: './src/db/schema.ts',
	dialect: 'sqlite',
	driver: 'd1-http',
	dbCredentials: {
		accountId: process.env.CLOUDFLARE_ACCOUNT_ID!,
		databaseId: process.env.CLOUDFLARE_DATABASE_ID!,
		token: process.env.CLOUDFLARE_D1_TOKEN!,
	},
});
```

### ï¼ˆè£œè¶³ï¼‰driverãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã¤ã„ã¦

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ç©ºæ¬„ã«ãªã£ã¦ã„ã¾ã™ãŒé–“é•ã„ã§ã™ã€‚

```text
// ä¿®æ­£å‰
driver: '',

// ä¿®æ­£å¾Œ
driver: 'd1-http',
```

ãªãŠç©ºæ¬„ã®ã¾ã¾`drizzle-kit migrate`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒãŒä¸­æ–­ã—ã¾ã™ã€‚

## Step 8: ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹3ã¤ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

```text
CLOUDFLARE_ACCOUNT_ID='Cloudflareã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID'
CLOUDFLARE_DATABASE_ID='wrangler.tomlãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã—ãŸdatabase_idã¨åŒã˜å€¤'
CLOUDFLARE_D1_TOKEN='Cloudflareãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç™ºè¡Œã—ãŸAPIãƒˆãƒ¼ã‚¯ãƒ³'
```

### ï¼ˆè£œè¶³ï¼‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDã¨APIãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—æ–¹æ³•

Cloudflareã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDã¯[Cloudflareã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](https://dash.cloudflare.com)ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³â†’Workers & Pagesã«ç§»å‹•â†’Account IDã®ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å–å¾—ã§ãã¾ã™ã€‚

APIãƒˆãƒ¼ã‚¯ãƒ³ã«ã¤ã„ã¦ã¯ã€Cloudflareã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³â†’Account Manageâ†’Account API Tokensâ†’Create Tokenã‹ã‚‰ä½œæˆã§ãã¾ã™ã€‚

ãƒˆãƒ¼ã‚¯ãƒ³ä½œæˆç”»é¢ã«ç§»å‹•ã—ãŸã‚‰ã€Custom tokenã®Get startedãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚é …ç›®ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

- Resources: Accountã‚’é¸æŠ
- Permissions: D1ã‚’é¸æŠ
- Permissions levels: Editã‚’é¸æŠ

ãƒˆãƒ¼ã‚¯ãƒ³ã®åå‰ã‚„æœ‰åŠ¹æœŸé–“ãªã©ã¯é©å½“ã§æ§‹ã„ã¾ã›ã‚“ã€‚å…¥åŠ›ãŒå®Œäº†ã—ãŸã‚‰Continue to summaryãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

æ¨©é™ã¨ã—ã¦ã€ŒD1:Editã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸã‚‰ã€Create Tokenãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ“ä½œæ¨©é™ã®ã‚ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ãŒç™ºè¡Œã•ã‚Œã¾ã™ã€‚

## Step 9: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```console
$ npx drizzle-kit generate
```

ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰æˆåŠŸã§ã™ã€‚

```text
No config path provided, using default 'drizzle.config.ts'
Reading config file '/private/tmp/drizzle-test/drizzle.config.ts'
1 tables
users 4 columns 1 indexes 0 fks

[âœ“] Your SQL migration file âœ drizzle/0000_daily_hardball.sql ğŸš€
```

## Step 10: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã—ã¾ã™ã€‚

```console
$ npx drizzle-kit migrate
```

çµæœã¯ä»¥ä¸‹ã®2è¡Œã—ã‹è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚æˆåŠŸã—ãŸã‹ä¸å®‰ã«ãªã‚Šã¾ã™ãŒã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã‘ã‚Œã°æˆåŠŸã§ã™ã€‚

```console
No config path provided, using default 'drizzle.config.ts'
Reading config file '/private/tmp/drizzle-test/drizzle.config.ts'
```

### ï¼ˆè£œè¶³ï¼‰drizzle-kit pushã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦

Drizzleã®Get startedã§ã¯`drizle-kit push`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã™ã‚‹æ–¹æ³•ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯å¤±æ•—ã—ã¾ã™ã€‚

```console
$ npx drizzle-kit push
No config path provided, using default 'drizzle.config.ts'
Reading config file '/private/tmp/drizzle-test/drizzle.config.ts'
[âœ“] Pulling schema from database...
Error: 7500: not authorized: SQLITE_AUTH
```

ãªãŠã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã®ã¯pushã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã¿ã§ã™ã€‚ã™ã§ã«GitHubã«IssueãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã„ãšã‚Œä¿®æ­£ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

- [[BUG] Cloudflare D1: drizzle-kit push is not working (error 7500 SQLITE_AUTH) Â· Issue #3728](https://github.com/drizzle-team/drizzle-orm/issues/3728)

push / pullã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã¯æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã‚¹ã‚­ãƒ¼ãƒã‚’èª­ã¿å–ã‚Šã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹å ´åˆã«åˆ©ç”¨ã—ã¾ã™ã€‚ãŸã ã—ã€åˆ¥ã®ãƒ„ãƒ¼ãƒ«ã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ©ç”¨ã™ã‚‹`.sql`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã€migrateã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚‚åŒæ§˜ã®çµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

## Step 11: ãƒ¬ã‚³ãƒ¼ãƒ‰ã®èª­ã¿æ›¸ãå‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹

GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã€POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã—ã‚‡ã†ã€‚`src/index.ts`ã‚’ä»¥ä¸‹ã®å†…å®¹ã§ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

```ts
import { drizzle } from 'drizzle-orm/d1';
import { usersTable } from './db/schema';

export default {
	async fetch(request, env, ctx): Promise<Response> {
		switch (request.method) {
			case 'POST': {
				const db = drizzle(env.DB);
				const record: typeof usersTable.$inferInsert = {
					name: 'John',
					age: 23,
					email: crypto.randomUUID() + '@example.com',
				};

				await db.insert(usersTable).values(record);

				return new Response(null, { status: 201 });
			}
			case 'GET': {
				const db = drizzle(env.DB);
				const result = await db.select().from(usersTable).all();

				return Response.json({ count: result.length, values: result });
			}
			default: {
				return new Response(null, { status: 405 });
			}
		}
	},
} satisfies ExportedHandler<Env>;
```

## Step 12: å‹•ä½œç¢ºèª

ãã‚Œã§ã¯å‹•ä½œç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã¾ãšã¯Workerã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```console
$ npx wrangler deploy
```

å®Ÿè¡Œçµæœã®ä¾‹

D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãŒæ­£ã—ãèªè­˜ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ŒXXXã€ãŒã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã«å«ã¾ã‚Œã¦ã„ã‚Œã°æ­£å¸¸ã§ã™ã€‚

```console
 â›…ï¸ wrangler 3.100.0
--------------------

Total Upload: 188.87 KiB / gzip: 38.52 KiB
Worker Startup Time: 13 ms
Your worker has access to the following bindings:
- D1 Databases:
  - DB: my-database (a608b15c-4869-404e-9926-83e9e56d684d)
Uploaded drizzle-test (2.96 sec)
Deployed drizzle-test triggers (0.66 sec)
  https://drizzle-test.<yourname>.workers.dev
Current Version ID: e27fe9b1-b79a-487b-a6c0-44356d180b1b
```

ã¾ãšã¯GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è©¦ã—ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

â€»URLã®`<your_name>`ã¯å„è‡ªã®å€¤ã«èª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚

```console
$ curl https://drizzle-test.<your_name>.workers.dev
```

ã“ã®æ™‚ç‚¹ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ç©ºãªã®ã§ä»¥ä¸‹ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã•ã‚Œã¾ã™ã€‚

```text
{"count":0,"values":[]}
```

æ¬¡ã¯ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚

```console
$ curl -i -X POST https://drizzle-test.<your_name>.workers.dev
```

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã¨201 Createdãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã•ã‚Œã¾ã™ã€‚

```text
HTTP/2 201
date: Thu, 09 Jan 2025 04:58:22 GMT
content-length: 0
# ä»¥ä¸‹çœç•¥
```

ã“ã‚Œã§ãƒ†ãƒ¼ãƒ–ãƒ«ã«1ã¤ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæŒ¿å…¥ã•ã‚Œã¾ã—ãŸã€‚æ”¹ã‚ã¦GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```console
$ curl https://drizzle-test.<your_name>.workers.dev
```

ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```text
{"count":1,"values":[{"id":1,"name":"John","age":23,"email":"d73c45b2-ebd2-46e6-9afe-c5fb60204c9d@example.com"}]}%
```

ä½œæ¥­ã¯ä»¥ä¸Šã§å®Œäº†ã§ã™ã€‚Drizzle ORMã‚’Cloudflare D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å¯¾ã—ã¦åˆ©ç”¨ã§ãã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

## å‚è€ƒè³‡æ–™
