---
title: "（Swift）"
emoji: "😺"
type: "tech"
topics: [Swift, iOS]
published: false
---
## 結論

お急ぎの方のため、先に結論から。

1. AVCaptureVideoDataOutputでビデオ処理中にライトを点灯させるにはAVCaptureSessionにAVCapturePhotoOutputを追加してください。
2. 必要になるのはAVCapturePhotoOutputをセッションに追加するだけです。なにかパラメータを設定したりデリゲートを実装するなどの対応は不要です。
3. iOS 15からiOS 17までの実機iPhoneでライトが点灯することを確認しました。おそらくiOS 15以前の古いiOSも同様に動作するはずです。
4. ビデオ処理中かつライト点灯中にコントロールセンターを開くとライトが消灯かつ非活性としてアイコンが表示されます。アイコンの表示がライトの状態と連動していないため不具合と思われます。
5. 将来のiOSでこの回避策が潰される恐れがあります。ライトの点灯機能が必須なアプリを開発する場合は実機で動作確認するようにしてください。

それでは本題に進みましょう。

## iPhoneのライトを点灯した状態でビデオをプレビューしたい
