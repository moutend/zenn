---
title: "ï¼ˆSwiftï¼‰RPBroadcastSampleHandlerã®processSampleBufferã«æ¸¡ã•ã‚Œã‚‹ç”»åƒã®å‘ãã‚’å–å¾—ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ‰"
type: "tech"
topics: [Apple, iOS, Swift, ReplayKit]
published: false
---
## çµè«–

ReplayKitã®è©±é¡Œã§ã™ã€‚processSampleBufferã«æ¸¡ã•ã‚Œã‚‹CMSampleBufferã«ã¯ç”»åƒã®å‘ãã‚’ç¤ºã™ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯RPVideoSampleOrientationKeyã§ç”»åƒã®å‘ãã‚’å–å¾—ã—ã¾ã™ã€‚

```swift
if let orientationAttachment = CMGetAttachment(
  sampleBuffer, key: RPVideoSampleOrientationKey as CFString, attachmentModeOut: nil) as? NSNumber
{
  let orientation = CGImagePropertyOrientation(rawValue: orientationAttachment.uint32Value)
}
```

## ï¼ˆãŠã¾ã‘ï¼‰CGImagePropertyOrientationã®å€¤ä¸€è¦§

| CGImagePropertyOrientation | rawValue |
|:---|:---|
| .up | 1 |
| .upMirrored | 2 |
| .down | 3 |
| .downMirrored | 4 |
| .leftMirrored | 5 |
| .right | 6 |
| .rightMirrored | 7 |
| .left | 8 |

## å‚è€ƒè³‡æ–™

1. [ReplayKit Sample Buffer Orientation - Apple Developer Forums](https://forums.developer.apple.com/forums/thread/81961)
2. [processSampleBuffer - Apple Developer Documentation](https://developer.apple.com/documentation/replaykit/rpbroadcastsamplehandler/processsamplebuffer(_:with:))
3. [CGImagePropertyOrientation - Apple Developer Documentation](https://developer.apple.com/documentation/imageio/cgimagepropertyorientation)
