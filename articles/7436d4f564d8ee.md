---
title: "ï¼ˆSwiftUIã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰ãƒ“ãƒ¥ãƒ¼ã®ç¯„å›²ã‚’.clipped()ã§åˆ‡ã‚Šå–ã£ã¦ã‚‚VoiceOverãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¿ãƒƒãƒé ˜åŸŸãŒè²«é€šã™ã‚‹"
emoji: "ğŸ™Œ"
type: "tech"
topics: [Apple, SwiftUI, iOS, VoiceOver, ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£]
published: true
---
# ã¯ã˜ã‚ã«

VoiceOverã®æŒ™å‹•ã«ã¤ã„ã¦ã®è¨˜äº‹ã§ã™ã€‚ä»¥ä¸‹ã®ç’°å¢ƒã§å‹•ä½œç¢ºèªã—ã¾ã—ãŸã€‚

- Xcode Version 14.2 (14C18)
- iOS 15.7.1
- å®Ÿæ©Ÿ iPhone 13

â€»iOS 13ä»¥ä¸Šã§ã‚ã‚Œã°åŒã˜æŒ™å‹•ã«ãªã‚‹ã¯ãšã§ã™ãŒã€ã™ã¹ã¦ã®ç’°å¢ƒã§å‹•ä½œã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

## æ„å›³ã—ãªã„æŒ™å‹•ã«ãªã‚‹å®Ÿè£…ä¾‹

ä¾‹ã¨ã—ã¦ã€ä¸Šä¸‹2æ®µã®ãƒ“ãƒ¥ãƒ¼ã§æ§‹æˆã•ã‚ŒãŸç”»é¢ã‚’è€ƒãˆã¾ã™ã€‚ç”»é¢ä¸‹éƒ¨ã«ã¯ç´°é•·ã„ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚ã‚Šã€ä¸Šéƒ¨ã«ã¯ãƒ¡ã‚¤ãƒ³ã®ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚‹æƒ³å®šã§ã™ã€‚ã‚¢ãƒ—ãƒªã®ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¨ã—ã¦ã¯ä¸€èˆ¬çš„ã‹ã¨æ€ã„ã¾ã™ã€‚

ã“ã“ã§ã€ãƒ¡ã‚¤ãƒ³ã®ãƒ“ãƒ¥ãƒ¼ã«å·¨å¤§ãªãƒ“ãƒ¥ãƒ¼ã‚’é…ç½®ã—ã¾ã™ã€‚ä»¥ä¸‹ã®å®Ÿè£…ä¾‹ã§ã¯ç¸¦æ¨ªãŒ2000 x 2000ã®é’ã„å››è§’å½¢ã‚’é…ç½®ã—ã¾ã™ã€‚åœ°å›³ã‚¢ãƒ—ãƒªãªã©ã§å¤§ããªç”»åƒã‚’é…ç½®ã—ãŸã‚‚ã®ã¨æƒ³åƒã—ã¦ãã ã•ã„ã€‚

å½“ç„¶ãªãŒã‚‰ã€ã“ã®å·¨å¤§ãªãƒ“ãƒ¥ãƒ¼ã¯ç”»é¢ã«å…¥ã‚Šã¾ã›ã‚“ã€‚ãã“ã§GeometryReaderã§ãƒ“ãƒ¥ãƒ¼ã‚’å›²ã‚€ãƒ•ãƒ¬ãƒ¼ãƒ ã®ã‚µã‚¤ã‚ºã‚’å–å¾—ã—ã€ãã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ãƒ“ãƒ¥ãƒ¼ã‚’åˆ‡ã‚Šå–ã‚Šã¾ã™ã€‚

```swift
import SwiftUI

struct MapView: View {
  let size: CGSize

  var body: some View {
    ZStack {
      Rectangle()
        .frame(width: 2000, height: 2000)
        .foregroundColor(.blue)
    }
    .frame(width: self.size.width, height: self.size.height)
    .clipped()
    .accessibilityAddTraits(.allowsDirectInteraction)
    // .gesture(...) ã‚¸ã‚§ã‚¹ãƒãƒ£ã®å‡¦ç†ã¯çœç•¥
  }
  init(size: CGSize) {
    self.size = size
  }
}

struct ContentView: View {
  var body: some View {
    VStack {
      HStack {
        GeometryReader { proxy in
          MapView(size: proxy.size)
        }
      }
      HStack {
        Button(action: {
          // çœç•¥
        }) {
          Text("Tab Menu")
            .font(.title)
            .frame(maxWidth: .infinity, maxHeight: 100)
            .background(.black)
            .foregroundColor(.white)
            .accessibilityLabel("Tab Menu")
        }
      }
    }
  }
}
```

## VoiceOverã®ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¿ãƒƒãƒé ˜åŸŸã¯clippedã‚’ç„¡è¦–ã™ã‚‹

VoiceOverãŒæœ‰åŠ¹ãªçŠ¶æ…‹ã§å®Ÿè£…ä¾‹ã®ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¦ç”»é¢ä¸‹éƒ¨ã‚’ã‚¿ãƒƒãƒã—ã¾ã™ã€‚Buttonãƒ“ãƒ¥ãƒ¼ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå½“ãŸã‚Šã€Œã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ã¨èª­ã¿ä¸Šã’ã‚‹ã€ã“ã‚ŒãŒæœŸå¾…ã™ã‚‹æŒ™å‹•ã§ã™ã€‚

ã—ã‹ã—ã€å®Ÿéš›ã«ã¯ç”»é¢ä¸‹éƒ¨ã‚’ã‚¿ãƒƒãƒã—ã¦ã‚‚ã€Œãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¿ãƒƒãƒé ˜åŸŸã€ã¨èª­ã¿ä¸Šã’ã•ã‚Œã¾ã™ã€‚ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ“ãƒ¥ãƒ¼ã‚’è²«é€šã—ã¦ç”»é¢å…¨ä½“ã‚’2000 x 2000ã®ãƒ“ãƒ¥ãƒ¼ãŒè¦†ã£ã¦ã„ã‚‹ã¨ã€VoiceOverã¯èªè­˜ã—ã¦ã„ã¾ã™ã€‚

ã“ã®æŒ™å‹•ã¯ä¸å…·åˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Apple developerã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å¼•ç”¨ã—ã¾ã™ã€‚

> Use the clipped(antialiased:) modifier to hide any content that extends beyond the layout bounds of the shape. By default, a viewâ€™s bounding frame is used only for layout, so any content that extends beyond the edges of the frame is still visible.
> 
> å¼•ç”¨å…ƒ https://developer.apple.com/documentation/swiftui/view/clipped(antialiased:)

ãƒ•ãƒ¬ãƒ¼ãƒ å¢ƒç•Œã‚’ã“ãˆãŸç¯„å›²ã®ãƒ“ãƒ¥ãƒ¼ã‚’éš ã™ã®ãŒ`.clipped()`ã®å½¹å‰²ã§ã™ã€‚VoiceOverã®ãƒ’ãƒƒãƒˆã‚¨ãƒªã‚¢ã«ã¤ã„ã¦ã¯ä¸€åˆ‡è¨€åŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

è¦‹ãˆãªã„ãƒ“ãƒ¥ãƒ¼ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒã‚ãŸã‚‹ã®ã¯ä¸å…·åˆã ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€VoiceOverã¯ç”»é¢ã®å¤–å´ã«ã‚ã‚‹ä¸å¯è¦–ã®ãƒ“ãƒ¥ãƒ¼ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã®å‹•ä½œã§ã‚ã‚Šã€VoiceOverãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦è‡ªç„¶ãªæŒ™å‹•ã§ã™ã€‚

ã‚ˆãã‚ã‚‹ä¾‹ãŒã‚«ãƒ«ãƒ¼ã‚»ãƒ«ï¼ˆæ°´å¹³æ–¹å‘ã«é•·ã„ãƒ“ãƒ¥ãƒ¼ï¼‰ã§ã™ã€‚ãªãŠã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã®å ´åˆã€æ­£ã—ãå®Ÿè£…ã•ã‚Œã¦ã„ã‚Œã°ä¸å¯è¦–ã®ç¯„å›²ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒç§»å‹•ã™ã‚‹ã¨ã€ãã®ãƒ“ãƒ¥ãƒ¼ãŒç”»é¢ä¸Šã«è¦‹ãˆã‚‹ï¼ˆVoiceOverã®ãƒ’ãƒƒãƒˆã‚¨ãƒªã‚¢ãŒç¾ã‚Œã‚‹ï¼‰ã¾ã§è‡ªå‹•çš„ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚

## è§£æ±ºç­–

ä»Šå›ã®ã‚ˆã†ãªãƒ’ãƒƒãƒˆã‚¨ãƒªã‚¢å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®ModifierãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚`.contentShape()`ã§ã™ã€‚å…ˆã»ã©ã®å®Ÿè£…ä¾‹ã§ã‚ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

```swift
.frame(width: self.size.width, height: self.size.height)
.clipped()
.contentShape(Rectangle()) // è¿½åŠ 
.accessibilityAddTraits(.allowsDirectInteraction)
```

ã“ã‚Œã§è¦‹ãŸç›®ã¨VoiceOverãŒèªè­˜ã™ã‚‹ãƒ’ãƒƒãƒˆã‚¨ãƒªã‚¢ã®ãšã‚Œã‚’è§£æ¶ˆã§ãã¾ã™ã€‚

## å‚è€ƒè³‡æ–™

- [Accessible descriptions - Apple Developer Documentation](https://developer.apple.com/documentation/swiftui/accessible-descriptions)
- [Input events - Apple Developer Documentation](https://developer.apple.com/documentation/swiftui/input-events)
- [clipped(antialiased:) - Apple Developer Documentation](https://developer.apple.com/documentation/swiftui/view/clipped(antialiased:))
- [contentShape(_:eoFill:) - Apple Developer Documentation](https://developer.apple.com/documentation/swiftui/view/contentshape(_:eofill:))
