---
title: "（2025年版）サブスクリプション課金アプリをApp Storeで公開する手順まとめ"
emoji: "🍎"
type: "tech"
topics: [iOS, iPhone, Apple, App Store]
published: false
---
## はじめに

サブスクリプションによるIn-App Purchase（アプリ内課金）が実装された有料アプリをApp Storeで公開する手順をまとめました。慣れてしまえば難しくないのですが、最初はどこから着手すればよいのか迷うはずです。この記事がアプリを公開する手助けになれば幸いです。  
想定読者は本業が別にある個人のアプリ開発者です。無料アプリの公開経験があり、そろそろ腕試しに有料アプリを公開してみようとお考えの方を想定しています。  
法人を設立して大規模な有料アプリを開発する予定の方は本記事の対象外です。App Store Connectの設定など参考になる点はあるかもしれませんが、あまり役に立たないかもしれません。  
まずはアプリ開発をはじめる前の確認事項から説明します。具体的な作業の流れを知りたい方はXXXまで読み飛ばしてください。  

## 前提

記事を読み進めるにあたり、以下の点にご注意ください。

1. 本記事はStoreKitフレームワークを利用した月額サブスクリプション課金について説明します。RevenueCatなどサードパーティーの課金管理サービスは利用しません。
2. アプリの配信先は日本のApp Storeに限定します。また、対象のプラットフォームはiOSに限定します。
3. App Store Connectの言語設定は英語を前提に説明します。（一部日本語のローカライズが漏れていて紛らわしいため）

### 個人事業の開業届は必要か？

不要です。App Store Connectが開業届の提出を求めることはありません。ただし、アプリの収益が雑所得の範囲を上回った場合は、開業届の提出有無に関わらず確定申告が必要になります。  
本業が会社員の場合、開業届を提出していると例えば万が一無職になった場合に雇用保険の失業手当を受給できない恐れがあります。事業の廃止や休止を証明することで受給可能になりますが、手続きが面倒です。  
悲しいことに、個人が開発したアプリで収益を得られることは滅多にありません。雑所得の範囲を大きく上回り、収益が安定して継続できると見込まれる段階になるまで、開業は考えなくてよいかと思います。  

### どのような課金方式を選ぶべきか？

課金の分類として消耗型と非消耗型があります。消耗型はゲームアプリにおける体力回復アイテムのような一度消費すると効力を失うもの、非消耗型は加入中は効力が維持され続けるものが該当します。サブスクリプションは非消耗型の課金方式です。  
特に個人でアプリを開発する場合、サブスクリプション方式での実装を強くお勧めします。主な理由は以下3点です。  

1. サブスクリプション加入状態だけに気を配れば良いので、プラン判定のロジックが単純です。また、Basic / Pro / Ultraのようなグレードを用意して、排他的に選択させることが可能です。
2. サーバーを構築せず課金処理が実現できます。App StoreサーバーがSSoT（Single Source of Truth：信頼できる唯一の情報源）となるため、課金の履歴管理を行うためのデータベースやユーザー認証基盤を整備する手間を省けます。
3. 消耗型の課金でよくあるトラブルを回避できます。
  - 例えばゲームアプリで体力回復アイテムを購入したのに、効果がなかったと苦情が届いたとします。考えられる原因は以下2つです。
    - ユーザーの勘違い: アイテムを購入して体力回復した直後に攻撃を受けて相殺された結果、体力が回復していないように見えた。
    - ロジックの不具合: 実装に欠陥があり、本当に体力が回復していなかった。
  - どちらが原因にせよ、ユーザーの行動を証跡として記録する仕組みの事前構築が必要になります。履歴がなければ何が起きたのか正しく把握できません。
  - 消耗型の課金で発生したトラブルを解決するには時系列を正確に把握する必要があります。これは調査のためユーザーと開発者双方に大きな負担となります。

上記の理由から、本記事はサブスクリプション方式の課金を前提に説明を行います。  

## App Storeにおけるサブスクリプション関連用語の整理

### Subscription Group（サブスクリプショングループ）とは

サブスクリプションのプランを束ねる単位です。通常は1つのアプリに1つのSubscription Groupを作成します。  
ユーザーが契約できるプランはSubscription Groupの中で1つだけです。同時に複数のプランを契約することはできません。  
ChatGPTアプリを例に説明しましょう。ChatGPTという1つのSubscription Groupがあり、その中に選択肢としてPlus（月額3,000円）とPro（月額30,000円）があります。PlusとProを同時に契約することはできません。  
なお、1つのアプリにSubscription Groupを複数作成することは可能ですが、一般的ではありません。原則として1つのアプリに1つのSubscription Groupを作成するのだと覚えてください。  

### Auto-Renewable Subscription（自動更新サブスクリプション）とは

ユーザーが自らキャンセルするまで自動的に更新され続ける課金方式です。なお、App Store Connectで自動更新サブスクリプションの「期間」として選べるのは、次の6種類です。  

- 1週間
- 1ヶ月
- 2ヶ月
- 3ヶ月
- 6ヶ月
- 1年

自動更新サブスクリプションの期間として、1.5ヶ月や3年といった独自の期間を設定することはできません。  

### Product ID（プロダクトID）とは

課金アイテムを識別するためのIDです。プロダクトIDという用語は消耗型の課金と非消耗型の課金で共通して使われます。  
サブスクリプション方式の課金の場合、サブスクリプションのプランごとにプロダクトIDを設定します。ChatGPTアプリを例にすると、PlusプランとProプランそれぞれにプロダクトIDを割り振ります。  

## 課金プラン

以下のように設定すれば、ご提示の4 プランを App Store Connect で問題なく実現できます。
* **サブスクリプション グループを1つだけ作成**
  ユーザーはグループ内で同時に1 商品しか購入できないため、「Basic／Premium のいずれか1つだけ選択できる」という要件を満たせます。([Apple Developer][1])
* **サブスクリプション 商品を4つ作成**
  * Basic 1 か月
  * Basic 1 年
  * Premium 1 か月
  * Premium 1 年
    それぞれ価格を 500 円 / 5 000 円 / 2 000 円 / 20 000 円に設定します（価格表は後述の CSV 参照）。
* **レベル（階層）の割り当て**
  1 年・1 か月という“期間違い”は同じレベルに積み重ね、機能差でレベルを分けるのが推奨手順です。
  例:
  * Premium (上位) → レベル 1
  * Basic (下位) → レベル 2
    こうしておくと、ユーザーは残存日数を損なわずにアップグレード／ダウングレード／クロスグレードできます。([Apple Developer][1])
* **解約後のアクセス継続**
  自動更新型サブスクリプションは、ユーザーが解約しても現在の請求期間が終わるまではアクセスが維持されます。追加設定は不要です。([Apple Developer][2])
* **運用面で押さえておくと良いポイント**
  ・Billing Grace Period を有効にしておくと支払失敗時の一時停止を避けられます。([Apple Developer][3])
  ・StoreKit 2 の `Transaction.currentEntitlements` などで購読状況を取得し、Premium と Basic の機能分岐を行います。
  ・アップグレード時は即時適用（差額請求あり）、ダウングレード／期間変更は次回更新から適用される点を UI で明示すると親切です。
### 設定内容まとめ（CSV）
```csv
product_id,duration,subscription_level,price_jpy
com.example.app.basic.monthly,1_month,2,500
com.example.app.basic.yearly,1_year,2,5000
com.example.app.premium.monthly,1_month,1,2000
com.example.app.premium.yearly,1_year,1,20000
```
このように構成すれば、
* 4 商品のうち1 つだけを選択
* 年額プランを途中で解約しても残り期間は利用可能
* Premium を Basic の上位として扱う階層管理
  をすべて Apple 標準機能だけで実装できます。
## 作業の手順一覧

### Step 1. 銀行口座と納税フォームを設定する

以下の記事を参考に銀行口座と納税フォームの設定を行なってください。この作業が未完了の場合、有料アプリをApp Storeで公開することはできません。  

https://zenn.dev/moutend/articles/31abd8d6c3ac87

設定作業はアプリの開発と並行して行えます。とはいえ、アプリを開発しようと決めたら、早めに作業されることをお勧めします。  
なお、銀行口座と納税フォームの登録状況は無料アプリに全く影響しません。申請項目が入力途中の状態でも無料のアプリを新規に公開したり、既存の無料アプリをアップデートしたり問題なく行えます。  

### Step 2. Small Business Program（SBP）を申請する

Small business Program（SBP）を申請すると、App Storeの手数料が半額になります。具体的には、通常の手数料が30 %のところ15 %になります。  
条件はアプリの年間収益がUSD 1,000,000未満、日本円でおよそ1億5000万円未満に該当する場合です。ほぼ例外なく、個人のアプリ開発者は該当するはずです。  
なお、SBPは自動適用されず、自己申告する必要があります。また、SBPが適用されるのは申請後の収益に限ります。申請前に収益があったとしても、過去に遡って適用されることはありません。  
有料アプリを開発すると決めたら忘れず申請しましょう。せっかくアプリを収益化できたのに手数料を余計に撮られては非常にもったいないです。  

#### SBP申請項目

SBPの申請は以下のページから行います。  

[Enroll - App Store Small Business Program - Apple Developer](https://developer.apple.com/app-store/small-business-program/enroll/)

申請の際に回答する項目は次の5つです。

> 1.  
> Have you reviewed and accepted the latest Paid Applications Agreement (Schedule 2 to the Apple Developer Program License Agreement) in App Store Connect?
> App Store Connect で最新の Paid Applications Agreement（Apple Developer Program License Agreement の Schedule 2）を確認し、承諾しましたか？

Yesを選択しなければ申請できないため、実質的に選択肢はYesだけです。

> 2.  
> Do you have majority (over 50%) corporate, individual, or partnership interest in the ownership or shares of another Apple Developer Program member account?  
> あなたは、他の Apple Developer Program メンバーアカウントの所有権または株式について、企業・個人・パートナーシップとして過半数（50％超）の持分を有していますか？  

筆者はNoを選択しました。

> 3.  
> Does another Apple Developer Program member have majority (over 50%) corporate, individual, or partnership interest in the ownership or shares of your account?  
> 他の Apple Developer Program メンバーは、あなたのアカウントの所有権または株式について、企業・個人・パートナーシップとして過半数（50％超）の持分を有していますか？  

筆者はNoを選択しました。

> 4.  
> Do you have ultimate decision-making authority over another Apple Developer Program member account?  
> あなたは、他の Apple Developer Program メンバーアカウントに対して最終的な意思決定権限を有していますか？  

筆者はNoを選択しました。

> 5.  
> Does another Apple Developer Program member have ultimate decision-making authority over your account?  
> 他の Apple Developer Program メンバーは、あなたのアカウントに対して最終的な意思決定権限を有していますか？  

筆者はNoを選択しました。  
最後に、以下のチェックボックスにチェックをつけます。  

> To the best of your knowledge, you and your Associated Developer Accounts earned no more than 1,000,000 USD in total proceeds (sales net of Apple’s commission and certain taxes and adjustments) during the twelve (12) fiscal months occurring in the prior calendar year. You further acknowledge that the information provided above is accurate, and providing false or inaccurate information is grounds for disqualification, termination, and forfeiture of payment.  
> あなたの知る限りにおいて、あなたおよびあなたの関連開発者アカウントは、前暦年に該当する連続する 12 会計月の期間において、総収益（Apple の手数料および一部の税金・調整控除後）が合計 1,000,000 米ドルを超えていないことをここに表明します。また、上記の情報が正確であることを確認し、虚偽または不正確な情報を提供した場合は、失格・契約解除および支払いの没収の対象となることに同意します。  

各項目の設定を確認したら、Submitボタンを押してください。申請作業は以上で完了です。  
申請を行うと数分後にAppleから「We’ve received your request to join the App Store Small Business Program」という件名のメール通知が届きます。届かない場合は各設定項目を見直してみてください。  

#### 申請結果の連絡はいつ届く？

筆者の場合、2025年6月16日に申請して、2025年7月12日にSBPが適用されたとのメール通知が届きました。インターネットで事例を探してみると、申請に不備がなければ1ヶ月程度で審査が完了するとの報告がありますし、審査にかかる期間は1ヶ月程度を見込んでおくと良さそうです。  

### Step 3. Xcodeを利用して課金のテストを行う

### Step 4. App Store Connectでサブスクリプションの登録を行う
Your first subscription must be submitted with a new app version. Create your subscription, then select it from the app’s In-App Purchases and Subscriptions section on the version page before submitting the version to App Review.
- アプリ登録前も設定可能。
- 添付するスクリーンショットは開発中のものでOK
- 入力項目が全て満たされると、グループに所属するアイテム一覧画面でSTATUS Ready to Submit  clickable  column 5
- ローカライズの項目については、項目を満たしていてもSTATUS Prepare for Submission  clickable  column 4
- 
### 5. サンドボックスアカウントを作成する

### 6. サンドボックスアカウントを利用して課金のテストを行う

## バージョン登録画面のIn-App Purchases and Subscriptionsを設定する

Select the in-app purchases or subscriptions you want to add to this app version.   (Optional)

## Product IDの命名規則

以下の文字が使用できます。空白や絵文字など、その他の木号は使用できません。

- 英字: A-Z, a-z
- 数字: 0-9
- ピリオド: `.`
- アンダースコア: `_`
- ハイフン: `-`
- 大文字と小文字が区別されます。入力ミスによる事故を防ぐため、小文字に統一するか大文字を利用する際のルールを決めておくと安全です。
- 長さは最大100文字です。短すぎても問題はありませんが、読みやすさ重視で30〜60文字程度に収めるのが一般的です。
- 一度保存すると変更も再利用もできません。削除しても同じProduct IDを別アイテムへ流用できません。
- ユーザーには公開されません。App Storeには表示されず、サーバー連携やコード上の識別子としてのみ使われます。
- 一意性と不変性
  - Product IDはアプリ内で一意である必要があります。例えばiOS用とmacOS用は別のProduct IDを設定する必要があります。
ユーザー非公開
App Storeには表示されず、サーバー連携やコード上の識別子としてのみ使われます。

## 推奨される命名パターン（慣例）

Appleは逆ドメイン（reverse-DNS）形式を推奨していますが、強制ではありません。
com.<会社や組織>.<アプリ名>.<カテゴリ>.<詳細>
実例
```text
com.example.MyApp.Subscription.Monthly
com.example.app.subscription.yearly       // 年額サブスク
com.example.app.coins.100                 // 仮想通貨 100 枚
```
### ベストプラクティスのポイント
* Bundle ID を先頭に付ける: 衝突を防ぎ、どのアプリの課金か一目で分かる。
* 階層をドットで区切る: カテゴリやプランをツリー構造で整理でき、ログや分析時にフィルタしやすい。
* 環境を明示: 開発／ステージング用なら `dev`, `sandbox`, `qa` などを途中に入れて本番と区別。
* 将来の変更がない情報だけを含める: 価格や期間をハードコードすると値上げ時に ID を作り直す羽目になるので、`monthly` など比較的普遍的な語に留める。
* すべて小文字: 大文字小文字は区別されるためバグの原因を減らすために小文字統一が安全。
## 命名ミスを防ぐためのチェックリスト
* コーディング前に スプレッドシートや JSON で ID 一覧を管理 し、仕様変更時はまず一覧を更新してから実装。
* テストアイテムは 別アプリ ID か明示的なプレフィックスで区別し、「誤本番」リリースを防止。
* レシート検証やサーバー処理では ハードコードせず定数管理 し、ID 変更が絶対に起こらない前提で書く。
---
## Subscription Groupで使う2種類の名前とルール

### Reference Name（内部用）

App Store Connectと売上レポートだけに現れる開発者向けの識別子です。文字種と長さともに厳密なフォーマットは定められておらず、Bundle IDのような逆ドメイン慣習もありません。ユーザーには一切見えないため、後から自由に変更しても審査は不要です。

実運用では以下のようなルールを決めておくと管理が楽になります。

- アプリ名やブランド名を付けておく。例えば`MyApp-MainPlan`など。
- テスト用グループは`Sandbox`など環境を後ろに付けて区別する。
- 将来の多言語展開に備えて英数字のみで記述する

### Display Name（ユーザー向け表示名）

購読管理画面などに表示される名前で、各ローカライズ単位で設定します。表示名を変更するとユーザーに見えるため、メタデータの審査が走る点に注意してください。

ガイドライン上の制約は以下のとおりです。

- 価格や期間、キャッチコピーを入れずサービス内容を端的に表現する。
- 制御文字・HTML・絵文字などの特殊記号は使えない。
- 各言語で自然な語句にする（日本語なら「プレミアムプラン」など）
* 必要に応じてアプリ名を上に重ねて表示するオプションも利用可

# 命名に関する実務的アドバイス
* 「ID と連動させる必要はない」
Product ID（逆ドメイン形式）とは完全に独立しています。Product ID を `com.example.app.subscription.monthly` のように整理しておけば十分で、グループ名まで同形式にするメリットはほとんどありません。
* 1 アプリ 1 グループならシンプルに
* サービス階層（Basic / Premium など）がない場合は `Main` や `Standard` 程度で問題ありません。
* 多階層・複数アプリで共有する場合
  * 「ブランド-機能」や「ブランド-対象ユーザー」など、横串で検索しやすいキーを入れると後で財務レポートを絞り込みやすくなります。
* テスト/ステージング用は本番と明確に分離
  * Reference Name に `-Dev` や `-QA` を添える、あるいは別 App ID で専用アプリを作るなどして、本番グループと誤課金が混ざらないようにするのが安全です。
* 将来の削除は不可
  * 一度作った Subscription Group は App Store Connect から削除できません。命名ミスを避けるため、初回作成時にチーム内レビューを挟むことを推奨します。
---
> まとめ
>
> * Subscription Group には厳格な命名規則や Bundle ID 風の決まりはなく、Reference Name と Display Name を区別して考えるだけで十分です。
> * 「内部用は自由、ユーザー向けは簡潔で分かりやすく」という原則を押さえ、チーム内の検索・集計しやすさを優先した独自ルールを設けるのが実務的なベストプラクティスです。
[
## StoreKit Configurationを利用したローカル実機テスト

（StoreKit Configuration を使ったローカル課金テストは iOS 14 以降で動作しますが、iOS 15 以降の方が Developer 設定が充実しています）([docs.namiml.com][1])
* ビルドは Debug で Xcode から直接インストールする（Archive や TestFlight ではローカルテストは無効）
## 手順
### 1. StoreKit 設定ファイル(.storekit)を作成
File > New > File… > StoreKit Configuration File
* 名前は任意。リソースに含めずプロジェクト直下に置くだけで OK。
* 右ペインで「＋」を押し、Auto-Renewable Subscription を追加。
  * Subscription Group を作成（有料プランが 1 種類なら 1 グループだけで可）
  * Duration を 1 Month に設定
  * Product ID はアプリ側コードと一致させる
### 2. スキームに紐付け
Product > Scheme > Edit Scheme…
└ Run (Debug) > Options > StoreKit Configuration : 先ほどの .storekit を選択
この設定が有効な間、シミュレータだけでなく接続した実機でも StoreKit がローカルモードになります。([developer.apple.com][2], [docs.namiml.com][1])
### 3. サブスク更新速度を加速
* .storekit を選択した状態で
  Editor > Subscription Renewal Rate から
  `Monthly – renew every 5 min` などを指定すると、1 か月分の更新が 5 分間隔で自動実行されます。([developer.apple.com][3], [docs.namiml.com][1])
* さらに細かい設定（Time Rate、失敗シナリオ、Ask-to-Buy など）は
  .storekit 編集画面右上のインスペクタで変更できます。([docs.namiml.com][1])
### 4. 実機でビルド＆起動
1. Lightning／USB-C で端末を接続
2. Xcode でターゲットをデバイスに切り替え
3. ⌘R で実行
   * 初回購入ダイアログは テスト用の Apple ID を要求しません（ローカル環境なのでネット接続不要）
   * 購入後、`Transaction.currentEntitlement(for:)` でサブスク状態を確認
### 5. テスト操作
* Xcode > Debug > StoreKit から「Manage Transactions」を開くと、
  * 購読のキャンセル／失効／返金などをワンクリックで注入できます
* 実機設定にも開発者メニューがあります
  `設定 > Developer > StoreKit` → 環境リセットやログ確認が可能（iOS 17 以降で追加機能あり）
## よくある落とし穴
* サーバー連携のテスト
  ローカルモードではレシートが擬似的で App Store サーバーに送られません。
  Web サーバー検証や App Store Server Notification を試すときは
  * StoreKit Configuration を Scheme から外す
  * App Store Connect の Sandbox Apple ID でサインインして実行
* .storekit を本番ビルドに同梱しない
  誤ってバンドルに入っても動作に影響はしませんが、ファイルサイズが増えるだけなので
  Build Phase から除外しておくと安心です。([docs.namiml.com][1])
* 購入 UI が空になる
  Product ID のタイプミスやグループ未設定が原因。
  `.storekit` 内で ID と Group を再確認し、保存し直すとリストが復活します。
